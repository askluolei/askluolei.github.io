---
title: MySQL 索引使用的注意事项
date: 2019-07-28 21:20:27
tags: [mysql]
categories: 技术笔记
---

索引能够加快查询速度，但是维护索引和更新索引也会消耗时间，  
不过通常只要建立合适的索引，从加快查询速度获取的收益是可以忽略掉维护和更新索引的消耗时间的  

创建索引的原则：
1. 更新频繁的列不应设置索引
2. 重复数据多的字段不应设为索引
3. 首先应该考虑对where 和 order by 涉及的列上建立索引

可以使用 explain 来查看查询是否走索引了。 
重点是
1. type 
  * system 表中就一行
  * const 通过索引一次找到
  * eq_ref 唯一索引，包括主键索引
  * ref 索引
  * range 范围索引
  * index  只遍历索引树
  * all 全部扫描

  顺便说下，走索引不一定查询时间就慢，还有看表里面有多少行数据  
  实际上一条查询语句的快慢是根据扫描行数确定的  

优化语句：
1. 不要在 `=` 左边用函数，例如 where a/2 = 10
2. 不要用 `<>`, `!=`, `not in`
3. 不用 null 判断
4. like 不要用左模糊 %abc
5. 避免用 or ，用 union 代替
6. exist 代替 in
7. 不要使用类型隐式转换
8. 联合索引的时候条件顺序
。。。
